<div class="cart-container">
  <div class="product-list">
    <div *ngFor="let prod of productsChosen" class="product-list__item col s12 m12 l12 xl12">
      <div class="col s12 m3 l2 xl2 product__img-block">
        <img [alt]="prod.titulo" [src]="prod.urlImagem" class="product__img">
      </div>

      <div class="col s12 m9 l10 xl10 text-section">
        <div class="col s12 m12 l8 xl8 product-list__item-title-desc">
          <span class="product__name">{{prod.titulo}}</span>

          <!-- Quantidade, frete grátis e disconto -->
          <div class="product__info">
            <span [ngClass]="{'text-red': prod.qtdDisponivel < 10}"
                  class="product__attr product__attr--min">
              <i aria-hidden="true" class="fas fa-cubes product__attr-icon"></i>
              {{prod.qtdDisponivel}} disponíveis
            </span>
            <span *ngIf="prod.freteGratis" class="product__attr">
              <i aria-hidden="true" class="fas fa-truck product__attr-icon" style="font-size: 14px"></i>
              frete grátis
            </span>
            <span *ngIf="prod.porcentDesc > 0" class="product__attr">
              <i aria-hidden="true" class="fas fa-dollar-sign product__attr-icon"></i>
              {{prod.porcentDesc}}% off
            </span>
          </div>
        </div>

        <div class="col s12 m12 l4 xl4 section_price_counter">
          <span class="product__price">
            {{prod.precoComDesc * prodAmount.get(prod.id) | currency: 'BRL'}}
            <span [hidden]="prodAmount.get(prod.id) < 2" class="product__price-amount">
              {{prod.precoComDesc | currency: 'BRL'}}
              <i aria-hidden="true" class="fa fa-times"></i>
              {{prodAmount.get(prod.id)}}
            </span>
          </span>
          <app-input-number (outValue)="changeAmount(prod.id, $event)"
                            [maxValue]="prod.qtdDisponivel" [minValue]="1">
          </app-input-number>
        </div>

        <!-- Ações de favoritar, remover do carrinho -->
        <div class="cart-actions col s12">
          <a class="cart-actions__favorite">
            <i aria-hidden="true" class="fa fa-heart action-icon"></i>
            Favoritar
          </a>
          <a (click)="removeFromCart(prod.id)" class="cart-actions__remove">
            <i aria-hidden="true" class="fa fa-trash-alt action-icon"></i>
            Remover
          </a>
        </div>

      </div>
    </div>
  </div>

  <div class="cart-footer">
    <div class="cart-cost">
      <div class="cart-cost__price">
        <span class="cart-cost__price-title">Produtos:</span>
        <span class="cart-cost__price-value">{{totalCost | currency: 'BRL'}}</span>
      </div>

      <div class="cart-cost__price">
        <span class="cart-cost__price-title">Entrega:</span>
        <span class="cart-cost__price-value">{{totalShipment | currency: 'BRL'}}</span>
      </div>

      <div class="cart-cost__price">
        <span class="cart-cost__price-title">Entrega em:</span>
        <a (click)="showModalAdress()" class="cart-cost__price-value">{{currAddress.cep}},
          {{currAddress.numero}}, {{currAddress.bairro}}
          <i aria-hidden="true" class="fa fa-cog" style="margin-left: 5px"></i>
        </a>
      </div>

      <div class="cart-cost__price">
        <span class="cart-cost__price-title">Total:</span>
        <span class="cart-cost__price-value">{{totalShipment + totalCost | currency: 'BRL'}}</span>
      </div>
    </div>
    <button class="btn-contained big">Finalizar compra</button>
  </div>
</div>
<app-modal-frete (action)="updateChosenDelivery()"
                 (chosenAddress)="tempAddress = $event"
                 (closed)="showModalAddress = false" *ngIf="showModalAddress"
                 [addresses]="userAddresses" [showInputCEP]="false">
</app-modal-frete>
